import React from "react";
import { InputMode } from "../../subjects/[subjectId]/mocks-new/[paperId]/types";
import { useResponsive } from "@/app/_hooks/useResponsive";

type SketchToolbarProps = {
  mode: InputMode;
  type: "edit" | "toolbar" | "toolbar-math";
  onSelectMode?: () => void;
  onTextMode?: () => void;
  onMathMode?: () => void;
  onPenMode?: () => void;
  onEraserMode?: () => void;
  onGrabMode?: () => void;
  hideGrabMode?: boolean;
  hidePenEraser?: boolean;
  onMessageMode?: () => void;
  showTouchTools?: boolean;
  onUndo?: () => void;
  onRedo?: () => void;
  canUndo?: boolean;
  canRedo?: boolean;
  mathCanvasMode?: "drawing" | "textbox";
  onMathCanvasModeChange?: (mode: "drawing" | "textbox") => void;
};

const SketchToolbar: React.FC<SketchToolbarProps> = ({
  mode,
  type,
  onSelectMode,
  onTextMode,
  onMathMode,
  onPenMode,
  onEraserMode,
  onGrabMode,
  onMessageMode,
  showTouchTools,
  hideGrabMode,
  hidePenEraser,
  onUndo,
  onRedo,
  canUndo,
  canRedo,
  mathCanvasMode,
  onMathCanvasModeChange,
}) => {
  return (
    <div className=" flex flex-row items-center justify-center">
      <div
        className={`flex gap-1 backdrop-blur-xl border-white bg-[rgba(255,255,255,0.8)] rounded-[18px] shadow-[0_0_15px_rgba(0,0,0,0.15)] canvas-toolbar p-2 pointer-events-auto`}
        onClick={(e) => e.stopPropagation()} // Prevent canvas click handler
      >
        {(type === "toolbar" || type === "toolbar-math") && (
          <>
            <button
              onClick={onSelectMode}
              className={`w-[36px] h-[36px] flex justify-center items-center ${
                mode === "select" ? "bg-[#1CA4FF]" : "hover:bg-[#F2F2F7]"
              } rounded-[10px]`}
              title="Select"
              style={{ cursor: "pointer" }}
            >
              <svg
                width="24"
                height="24"
                viewBox="0 0 28 28"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M12.2657 22.4902C12.881 23.8349 14.7618 23.5537 14.7706 22.0156L14.797 15.4765C14.797 15.3447 14.8497 15.3007 14.9815 15.3007L21.4767 15.2832C22.9884 15.2832 23.3311 13.3935 21.8722 12.7255L7.47568 6.07222C5.93759 5.36031 4.91806 6.55562 5.59482 8.02339L12.2657 22.4902ZM13.1886 20.3984C13.1886 20.4687 13.1095 20.4951 13.0655 20.416L7.39658 8.02339C7.35263 7.91792 7.41415 7.8564 7.51962 7.90914L19.877 13.5869C19.9649 13.622 19.9474 13.7099 19.8683 13.7099L13.9532 13.6748C13.4171 13.6748 13.1534 13.9296 13.1534 14.4834L13.1886 20.3984Z"
                  fill={mode === "select" ? "white" : "#1C1C1E"}
                />
              </svg>
            </button>

            {!hideGrabMode && (
              <button
                onClick={onGrabMode}
                className={`w-[36px] h-[36px] flex justify-center items-center ${mode === "grab" ? "bg-[#1CA4FF]" : "hover:bg-[#F2F2F7]"} rounded-[10px]`}
                title="Hand Tool"
                style={{ cursor: "pointer" }}
              >
                <svg
                  className="-scale-x-100"
                  width="26"
                  height="26"
                  viewBox="0 0 28 28"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M13.6572 23.1553C16.918 23.1553 19.1943 21.415 20.416 17.9873L21.9893 13.584C22.1035 13.2588 22.1562 12.9512 22.1562 12.6611C22.1562 11.6592 21.4092 10.9209 20.416 10.9209C19.7832 10.9209 19.2119 11.2812 18.9131 11.9668L18.4385 13.1182C18.4209 13.1533 18.4033 13.1709 18.3682 13.1709C18.3242 13.1709 18.3066 13.1445 18.3066 13.1006V6.35059C18.3066 5.23438 17.5771 4.51367 16.4961 4.51367C16.1621 4.51367 15.8545 4.61914 15.6172 4.82129C15.4414 3.93359 14.8174 3.38867 13.9121 3.38867C13.0332 3.38867 12.3916 3.94238 12.207 4.80371C11.9873 4.61035 11.7061 4.51367 11.4072 4.51367C10.3965 4.51367 9.70215 5.2168 9.70215 6.2627V7.08008C9.48242 6.86914 9.16602 6.75488 8.83203 6.75488C7.82129 6.75488 7.10938 7.51074 7.10938 8.58301V16.2822C7.10938 20.5361 9.72852 23.1553 13.6572 23.1553ZM13.6133 21.6523C10.4668 21.6523 8.54199 19.6484 8.54199 16.124V8.75C8.54199 8.41602 8.75293 8.1875 9.06934 8.1875C9.39453 8.1875 9.62305 8.41602 9.62305 8.75V13.2764C9.62305 13.6543 9.93066 13.918 10.2822 13.918C10.6426 13.918 10.9502 13.6543 10.9502 13.2764V6.48242C10.9502 6.14844 11.1611 5.91992 11.4863 5.91992C11.8027 5.91992 12.04 6.14844 12.04 6.48242V12.8105C12.04 13.1885 12.3389 13.4609 12.6904 13.4609C13.0508 13.4609 13.3584 13.1885 13.3584 12.8105V5.36621C13.3584 5.04102 13.5869 4.79492 13.9033 4.79492C14.2197 4.79492 14.4482 5.04102 14.4482 5.36621V12.7051C14.4482 13.0654 14.7383 13.3467 15.0986 13.3467C15.4678 13.3467 15.7666 13.0654 15.7666 12.7051V6.48242C15.7666 6.14844 15.9863 5.91992 16.3115 5.91992C16.6279 5.91992 16.8564 6.14844 16.8564 6.48242V15.2451C16.8564 15.7549 17.1816 16.0449 17.6035 16.0361C17.9551 16.0361 18.2715 15.8779 18.4824 15.4121L19.748 12.5732C19.8975 12.2305 20.1963 12.125 20.4688 12.2217C20.7676 12.3359 20.8643 12.626 20.7236 13.0039L19.0889 17.5127C17.999 20.501 16.1621 21.6523 13.6133 21.6523Z"
                    fill={mode === "grab" ? "white" : "#1C1C1E"}
                  />
                </svg>
              </button>
            )}

            {mathCanvasMode === "textbox" && (
              <>
                <button
                  onClick={onTextMode}
                  className={`w-[36px] h-[36px] flex justify-center items-center ${mode === "text" ? "bg-[#1CA4FF]" : "hover:bg-[#F2F2F7]"} rounded-[10px]`}
                  title="Text"
                  style={{ cursor: "pointer" }}
                >
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 28 28"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M4.29688 20.2373C4.89453 20.2373 5.21094 19.9912 5.4043 19.3584L6.3623 16.6514H11.3721L12.3301 19.3584C12.5234 19.9912 12.8398 20.2373 13.4375 20.2373C14.0703 20.2373 14.4746 19.8594 14.4746 19.2705C14.4746 19.0508 14.4395 18.8662 14.3516 18.6201L10.4844 8.16113C10.2119 7.39648 9.70215 7.03613 8.87598 7.03613C8.08496 7.03613 7.5752 7.39648 7.31152 8.15234L3.41797 18.6729C3.33008 18.9014 3.29492 19.0947 3.29492 19.2881C3.29492 19.877 3.67285 20.2373 4.29688 20.2373ZM6.87207 14.999L8.84961 9.30371H8.90234L10.8799 14.999H6.87207ZM19.6338 20.3076C21.1455 20.3076 22.2969 19.6045 22.833 18.3477H22.9033V19.4111C22.9121 19.9824 23.2812 20.3164 23.791 20.3164C24.3271 20.3164 24.6963 19.9648 24.6963 19.376V11.1582C24.6963 10.5605 24.3271 10.209 23.791 10.209C23.2725 10.209 22.9033 10.5605 22.9033 11.1582V12.2129H22.833C22.2969 10.9736 21.1016 10.2266 19.6338 10.2266C17.1904 10.2266 15.5908 12.2305 15.5908 15.2627C15.5908 18.3125 17.1904 20.3076 19.6338 20.3076ZM20.1611 18.752C18.5264 18.752 17.498 17.4072 17.498 15.2715C17.498 13.1357 18.5264 11.7822 20.1611 11.7822C21.7871 11.7822 22.8594 13.1709 22.8594 15.2803C22.8594 17.4072 21.8047 18.752 20.1611 18.752Z"
                      fill={mode === "text" ? "white" : "#1C1C1E"}
                    />
                  </svg>
                </button>

                {/* Add Math Button */}
                <button
                  onClick={onMathMode}
                  className={`w-[36px] h-[36px] flex justify-center items-center ${mode === "math" ? "bg-[#1CA4FF]" : "hover:bg-[#F2F2F7]"} rounded-[10px]`}
                  title="Math"
                  style={{ cursor: "pointer" }}
                >
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 28 28"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M13.7627 20.2461C14.123 20.2461 14.3779 20.0439 14.3779 19.6924C14.3779 19.5342 14.3428 19.4375 14.2285 19.1914C13.2266 17.4863 12.6816 15.667 12.6816 13.6719C12.6816 11.7383 13.2002 9.83984 14.2285 8.13477C14.3428 7.88867 14.3779 7.79199 14.3779 7.63379C14.3779 7.2998 14.123 7.08008 13.7627 7.08008C13.3848 7.08008 13.0859 7.26465 12.7432 7.73926C11.4863 9.37402 10.8623 11.4219 10.8623 13.6631C10.8623 15.9131 11.4775 17.917 12.7432 19.5869C13.0771 20.0703 13.3848 20.2461 13.7627 20.2461ZM23.6592 20.2461C24.0371 20.2461 24.3447 20.0703 24.6787 19.5869C25.9531 17.917 26.5596 15.9131 26.5596 13.6631C26.5596 11.4219 25.9268 9.37402 24.6787 7.73926C24.3447 7.25586 24.0371 7.08008 23.6592 7.08008C23.2988 7.08008 23.0439 7.2998 23.0439 7.63379C23.0439 7.79199 23.0791 7.88867 23.1934 8.13477C24.2217 9.83984 24.7402 11.7383 24.7402 13.6719C24.7402 15.667 24.1953 17.4863 23.1934 19.1914C23.0791 19.4375 23.0439 19.5342 23.0439 19.6924C23.0439 20.0264 23.2988 20.2461 23.6592 20.2461ZM2.80273 20.2373C4.63965 20.2373 5.49219 19.4727 5.92285 17.4336L6.88965 12.8105H8.46289C9.00781 12.8105 9.37695 12.5117 9.37695 11.9932C9.37695 11.5361 9.06934 11.2637 8.6123 11.2637H7.22363L7.45215 10.1562C7.67188 9.10156 7.99707 8.68848 8.91113 8.68848C9.06055 8.68848 9.19238 8.67969 9.29785 8.6709C9.78125 8.60938 10.0186 8.36328 10.0186 7.9502C10.0186 7.36133 9.55273 7.08887 8.59473 7.08887C6.78418 7.08887 5.87891 7.92383 5.47461 9.88379L5.18457 11.2637H4.1123C3.55859 11.2637 3.18945 11.5625 3.18945 12.0723C3.18945 12.5381 3.49707 12.8105 3.96289 12.8105H4.85938L3.93652 17.1611C3.70801 18.2422 3.37402 18.6377 2.47754 18.6377C2.36328 18.6377 2.24023 18.6377 2.15234 18.6465C1.67773 18.7168 1.43164 18.9893 1.43164 19.3848C1.43164 19.9648 1.89746 20.2373 2.80273 20.2373ZM15.9072 18.0928C16.25 18.0928 16.4697 17.9785 16.7422 17.5742L18.6406 14.8408H18.6758L20.6182 17.627C20.8818 17.9873 21.1016 18.0928 21.4004 18.0928C21.9189 18.0928 22.2705 17.75 22.2705 17.2754C22.2705 17.0732 22.209 16.8887 22.0684 16.6953L19.8359 13.6543L22.0508 10.6924C22.209 10.4814 22.2793 10.2969 22.2793 10.0684C22.2793 9.59375 21.9102 9.27734 21.4443 9.27734C21.0664 9.27734 20.8555 9.46191 20.627 9.80469L18.8164 12.4854H18.7725L16.9443 9.7959C16.7158 9.44434 16.4873 9.27734 16.0742 9.27734C15.5732 9.27734 15.1953 9.65527 15.1953 10.1123C15.1953 10.3936 15.2832 10.5781 15.4238 10.7627L17.5684 13.6367L15.3184 16.7217C15.1426 16.9414 15.0986 17.126 15.0986 17.3457C15.0986 17.7764 15.459 18.0928 15.9072 18.0928Z"
                      fill={mode === "math" ? "white" : "#1C1C1E"}
                    />
                  </svg>
                </button>
              </>
            )}

            {!hidePenEraser && (
              <>
                <button
                  onClick={onPenMode}
                  className={`w-[36px] h-[36px] flex justify-center items-center ${mode === "pen" ? "bg-[#1CA4FF]" : "hover:bg-[#F2F2F7]"} rounded-[10px]`}
                  title="Math"
                  style={{ cursor: "pointer" }}
                >
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <g clipPath="url(#clip0_766_3856)">
                      <path
                        d="M7.63934 20C8.0123 20 8.19481 19.7882 8.25829 19.4409L9.82947 10.9031L9.03595 11.5892H14.9556L14.1621 10.9031L15.7333 19.4409C15.7968 19.7882 15.9793 20 16.3523 20C16.8839 20 17.0664 19.6103 16.9792 19.153L15.4952 11.0895C15.4 10.5558 14.9794 10.1662 14.4954 10.1662H9.50412C9.02008 10.1662 8.59951 10.5558 8.50428 11.0895L7.02039 19.153C6.93311 19.6103 7.12355 20 7.63934 20ZM9.32954 10.8523H14.67L12.6941 4.55902C12.5751 4.20328 12.3529 4 12.0117 4C11.6546 4 11.4086 4.20328 11.2975 4.55902L9.32954 10.8523Z"
                        fill={mode === "pen" ? "white" : "#1C1C1E"}
                      />
                    </g>
                  </svg>
                </button>

                <button
                  onClick={onEraserMode}
                  className={`w-[36px] h-[36px] flex justify-center items-center ${mode === "eraser" ? "bg-[#1CA4FF]" : "hover:bg-[#F2F2F7]"} rounded-[10px]`}
                  title="Eraser"
                  style={{ cursor: "pointer" }}
                >
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M4.9893 15.7173L8.28687 19.0062C9.5735 20.2844 11.0135 20.3354 12.2235 19.1255L20.4376 10.9031C21.1959 10.1533 21.1874 9.07114 20.412 8.29576L15.7 3.59235C14.9245 2.81696 13.851 2.79992 13.0926 3.55826L4.87854 11.7722C3.66857 12.9907 3.71118 14.4307 4.9893 15.7173ZM5.96068 14.7459C5.30458 14.0813 5.27049 13.3229 5.89251 12.6924L14.0044 4.58075C14.2259 4.35921 14.5326 4.35921 14.7457 4.57222L19.4321 9.25859C19.6451 9.47162 19.6366 9.76984 19.4236 9.98285L11.3032 18.1031C10.6812 18.7336 9.92287 18.6995 9.25824 18.0349L5.96068 14.7459ZM6.23334 11.3547L12.641 17.7708L13.4931 16.9187L7.10246 10.5282L6.23334 11.3547Z"
                        fill={mode === "eraser" ? "white" : "#1C1C1E"}
                      />
                    </svg>
                  </svg>
                </button>
              </>
            )}

            {type === "toolbar-math" && (
              <div className="h-[36px] flex justify-center items-center rounded-[10px] bg-[#F2F2F7] px-1.5 gap-2 ml-1">
                <button
                  onClick={() => onMathCanvasModeChange?.("drawing")}
                  className={`w-[28px] h-[28px] rounded-[6px] flex justify-center items-center transition-all ${
                    mathCanvasMode === "drawing"
                      ? "bg-white shadow-[0px_0px_8px_0px_rgba(0,0,0,0.08)]"
                      : "bg-transparent opacity-50 hover:opacity-75"
                  }`}
                  style={{ cursor: "pointer" }}
                >
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 28 28"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M5.14943 16.0538C5.47462 16.3878 5.96681 16.379 6.292 16.0538L7.83888 14.5069C13.4551 8.89947 16.25 6.12213 17.1817 7.04498C17.8496 7.71295 16.1445 9.66412 13.7891 12.4327C11.4072 15.2452 8.69142 18.2686 10.5723 20.1583C12.2246 21.8282 14.8613 19.6924 17.1641 17.4688C19.0449 15.6495 20.2139 14.5508 20.5567 14.8936C20.8555 15.1924 20.3281 15.8428 19.6602 17.003C18.8252 18.462 17.7266 20.1583 18.8252 21.2657C19.6777 22.1094 21.0752 21.6436 22.7715 19.9122C23.1582 19.5254 23.1758 19.0333 22.8418 18.6993C22.5166 18.3829 22.0332 18.3917 21.6992 18.6993C20.6006 19.7276 20.0205 20.1495 19.8711 20.0088C19.7041 19.8506 20.1172 19.2178 20.9434 17.8643C22.1826 15.8165 22.5781 14.6211 21.7256 13.7774C20.6006 12.6524 18.8955 13.5577 16.0127 16.2999C13.4551 18.7169 12.2158 19.4991 11.7149 19.0069C11.1172 18.4268 12.0752 16.8624 15.0108 13.4874C18.5615 9.38287 19.8008 7.37017 18.3242 5.9024C16.4785 4.06549 14.501 5.55963 6.6963 13.3643L5.14943 14.9112C4.82423 15.2364 4.83302 15.7286 5.14943 16.0538Z"
                      fill="#1C1C1E"
                    />
                  </svg>
                </button>
                <button
                  onClick={() => {
                    onMathCanvasModeChange?.("textbox");
                    onMathMode?.();
                  }}
                  className={`w-[28px] h-[28px] rounded-[6px] flex justify-center items-center transition-all ${
                    mathCanvasMode === "textbox"
                      ? "bg-white shadow-[0px_0px_8px_0px_rgba(0,0,0,0.08)]"
                      : "bg-transparent opacity-50 hover:opacity-75"
                  }`}
                  style={{ cursor: "pointer" }}
                >
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 28 28"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M6.47656 5.4541C4.57812 5.4541 3.58496 6.42969 3.58496 8.31934V10.2002C3.58496 10.7539 3.91895 11.0879 4.46387 11.0879C5 11.0879 5.33398 10.7539 5.33398 10.2002V8.47754C5.33398 7.625 5.78223 7.20312 6.59082 7.20312H21.4004C22.209 7.20312 22.6572 7.625 22.6572 8.47754V10.2002C22.6572 10.7539 23 11.0879 23.5361 11.0879C24.0811 11.0879 24.415 10.7539 24.415 10.2002V8.31934C24.415 6.43848 23.4219 5.4541 21.5146 5.4541H6.47656ZM13.9824 17.7061C14.5537 17.7061 14.8701 17.3281 14.8701 16.7217V11.0088H16.7949C17.2256 11.0088 17.5244 10.7363 17.5244 10.3145C17.5244 9.875 17.2256 9.62012 16.7949 9.62012H11.2051C10.7744 9.62012 10.4756 9.875 10.4756 10.3145C10.4756 10.7363 10.7744 11.0088 11.2051 11.0088H13.1123V16.7217C13.1123 17.3193 13.4199 17.7061 13.9824 17.7061ZM4.46387 14.7529C5.1582 14.7529 5.72949 14.1816 5.72949 13.4785C5.72949 12.7842 5.1582 12.2041 4.46387 12.2041C3.76074 12.2041 3.18945 12.7842 3.18945 13.4785C3.18945 14.1816 3.76074 14.7529 4.46387 14.7529ZM23.5361 14.7529C24.2305 14.7529 24.8018 14.1816 24.8018 13.4785C24.8018 12.7842 24.2305 12.2041 23.5361 12.2041C22.833 12.2041 22.2617 12.7754 22.2617 13.4785C22.2617 14.1816 22.833 14.7529 23.5361 14.7529ZM6.47656 21.8809H21.5146C23.4219 21.8809 24.415 20.8965 24.415 19.0156V16.7832C24.415 16.2295 24.0723 15.8955 23.5361 15.8955C22.9912 15.8955 22.6572 16.2295 22.6572 16.7832V18.8574C22.6572 19.71 22.209 20.1318 21.4004 20.1318H6.59082C5.78223 20.1318 5.33398 19.71 5.33398 18.8574V16.7832C5.33398 16.2295 5 15.8955 4.46387 15.8955C3.91895 15.8955 3.58496 16.2295 3.58496 16.7832V19.0156C3.58496 20.8965 4.57812 21.8809 6.47656 21.8809Z"
                      fill="#1C1C1E"
                    />
                  </svg>
                </button>
              </div>
            )}
          </>
        )}

        {type === "edit" && (
          <>
            {onUndo && (
              <button
                onClick={() => {
                  if (canUndo !== false) onUndo();
                }}
                disabled={canUndo === false}
                className={`w-[36px] h-[36px] flex justify-center items-center rounded-[10px] ${
                  canUndo === false
                    ? "opacity-50 cursor-not-allowed"
                    : "hover:bg-[#F2F2F7] cursor-pointer"
                }`}
                title="Undo"
              >
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 28 28"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M22.4199 17.0029C22.4199 13.5049 20.0645 11.0879 16.0742 11.0879H10.5547L8.52441 11.1846L10.0625 9.88379L12.2949 7.7041C12.4707 7.53711 12.585 7.31738 12.585 7.02734C12.585 6.47363 12.1982 6.07812 11.627 6.07812C11.3809 6.07812 11.1084 6.19238 10.915 6.37695L5.87891 11.3428C5.67676 11.5361 5.57129 11.7998 5.57129 12.0723C5.57129 12.3359 5.67676 12.5996 5.87891 12.793L10.915 17.7588C11.1084 17.9434 11.3809 18.0576 11.627 18.0576C12.1982 18.0576 12.585 17.6621 12.585 17.1084C12.585 16.8184 12.4707 16.6074 12.2949 16.4316L10.0625 14.252L8.52441 12.96L10.5547 13.0479H16.1182C18.9307 13.0479 20.4863 14.6475 20.4863 16.9326C20.4863 19.2178 18.9307 20.8877 16.1182 20.8877H14.0615C13.4814 20.8877 13.0684 21.3271 13.0684 21.8633C13.0684 22.3994 13.4814 22.8389 14.0703 22.8389H16.1885C20.1084 22.8389 22.4199 20.5273 22.4199 17.0029Z"
                    fill="#1C1C1E"
                  />
                </svg>
              </button>
            )}

            {onRedo && (
              <button
                onClick={() => {
                  if (canRedo !== false) onRedo();
                }}
                disabled={canRedo === false}
                className={`w-[36px] h-[36px] flex justify-center items-center rounded-[10px] ${
                  canRedo === false
                    ? "opacity-50 cursor-not-allowed"
                    : "hover:bg-[#F2F2F7] cursor-pointer"
                }`}
                title="Redo"
              >
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 28 28"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M5.57129 17.0029C5.57129 20.5273 7.88281 22.8389 11.8027 22.8389H13.9297C14.5186 22.8389 14.9229 22.3994 14.9229 21.8633C14.9229 21.3271 14.5186 20.8877 13.9297 20.8877H11.873C9.06055 20.8877 7.50488 19.2178 7.50488 16.9326C7.50488 14.6475 9.06055 13.0479 11.873 13.0479H17.4365L19.4668 12.96L17.9287 14.252L15.6963 16.4316C15.5205 16.6074 15.415 16.8184 15.415 17.1084C15.415 17.6621 15.793 18.0576 16.373 18.0576C16.6104 18.0576 16.8828 17.9434 17.0762 17.7588L22.1123 12.793C22.3145 12.5996 22.4199 12.3359 22.4199 12.0723C22.4199 11.7998 22.3145 11.5361 22.1123 11.3428L17.0762 6.37695C16.8828 6.19238 16.6104 6.07812 16.373 6.07812C15.793 6.07812 15.415 6.47363 15.415 7.02734C15.415 7.31738 15.5205 7.53711 15.6963 7.7041L17.9287 9.88379L19.4668 11.1846L17.4365 11.0879H11.917C7.93555 11.0879 5.57129 13.5049 5.57129 17.0029Z"
                    fill="#1C1C1E"
                  />
                </svg>
              </button>
            )}
          </>
        )}

        {/* Add Question Button */}
        {/* <button
        onClick={onMessageMode}
        className={`p-1 ${mode === "message" ? "bg-[#1CA4FF]" : ""} rounded-[10px]`}
        title="Message"
        style={{ cursor: "pointer" }}
      >
        <svg width="24" height="24" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M7.27505 12.2499C8.10001 12.3577 8.68969 13.0415 8.57734 13.8138C8.46489 14.5861 7.70175 15.0932 6.87668 14.9856C6.05893 14.8789 5.46988 14.1946 5.58227 13.4229C5.69474 12.6513 6.45736 12.1432 7.27505 12.2499ZM9.39578 3.0572C10.5797 3.21173 11.5406 3.65084 12.1735 4.29647C12.809 4.94482 13.1043 5.79263 12.9669 6.73661C12.8782 7.34513 12.6463 7.84451 12.2692 8.25575C11.8936 8.66525 11.3816 8.9786 10.7461 9.22941L10.7447 9.22986C10.1646 9.45421 9.82341 9.63357 9.60269 9.82375C9.38932 10.0077 9.27831 10.211 9.18365 10.5108L9.18227 10.5157L9.18023 10.5204C9.07364 10.7908 8.91616 11.0134 8.69031 11.1556C8.46204 11.2994 8.18356 11.349 7.8627 11.3071C7.47713 11.2568 7.17446 11.0889 6.98349 10.8327C6.79369 10.578 6.7262 10.2524 6.77681 9.90477L6.79249 9.7971C6.86301 9.31288 7.05603 8.92062 7.37347 8.59643C7.68819 8.27506 8.11768 8.02852 8.64852 7.82069C9.21174 7.59446 9.5633 7.40451 9.78699 7.19589C10.0025 6.99482 10.1087 6.76742 10.1564 6.44027C10.2049 6.10693 10.1097 5.8138 9.90889 5.59019C9.70673 5.36518 9.38817 5.20064 8.97557 5.14674C8.60537 5.09843 8.29493 5.1449 8.03946 5.2701C7.7839 5.39539 7.56931 5.60633 7.40234 5.90831L7.39973 5.91241C7.24929 6.16731 7.05832 6.35175 6.8259 6.46117C6.5934 6.57061 6.33407 6.5981 6.0599 6.56232C5.70373 6.5158 5.41315 6.37051 5.22537 6.14001C5.03749 5.90929 4.96678 5.61048 5.01436 5.28327C5.06002 4.96974 5.16922 4.6959 5.34329 4.43735L5.42168 4.32705C6.13998 3.31272 7.61226 2.82445 9.39578 3.0572Z"
            fill={mode === "message" ? "white" : "black"} fillOpacity="0.8" />
        </svg>
      </button> */}
      </div>
    </div>
  );
};

export default SketchToolbar;
